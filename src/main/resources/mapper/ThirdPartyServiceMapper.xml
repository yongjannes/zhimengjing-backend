<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sf.zhimengjing.mapper.admin.ThirdPartyServiceMapper">

    <!-- 根据服务类型获取激活的服务列表 -->
    <select id="getActiveServicesByType" resultType="com.sf.zhimengjing.entity.admin.ThirdPartyService">
        SELECT * FROM third_party_services
        WHERE service_type = #{serviceType}
          AND is_active = 1
          AND delete_flag = 0
        ORDER BY priority ASC, create_time ASC
    </select>

    <!-- 更新测试结果 -->
    <update id="updateTestResult">
        UPDATE third_party_services
        SET test_result = #{testResult},
            test_error = #{testError},
            last_test_time = #{testTime},
            update_time = NOW()
        WHERE id = #{id}
    </update>

</mapper>